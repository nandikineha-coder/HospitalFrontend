
<nav class="navbar navbar-expand-lg navbar-dark shadow-sm">
  <div class="container-fluid d-flex justify-content-between align-items-center">
    <img src="assets/logo.png" alt="Hospital Logo" class="logo" />
    <div class="hospital-name text-white fw-bold fs-4 mx-auto">Happy Health Hospital</div>
     <div class="navbar-right">
    <button (click)="logout()">Logout</button>
  </div>
  </div>
</nav>

<!-- Sidebar + Content -->
<div class="layout">
  <!-- Sidebar -->
  <div class="sidebar">
    <ul>
      <li (click)="selectOption('home')">Home</li>
      <li (click)="selectOption('profile')">Profile</li>
      <li (click)="selectOption('appointment')">Appointment</li>
      <li (click)="selectOption('calender')">Calender</li>
    </ul>
  </div>

  <!-- Content Area -->
  <div class="content">
    <ng-container [ngSwitch]="selectedOption">
      <div *ngSwitchCase="'home'">
        <div class="content-area">
          <h3 class="section-title"> Hello Life Saver!</h3>

    <!-- Hospital Carousel -->
    <div id="hospitalSlides" class="carousel slide mb-4" data-bs-ride="carousel" data-bs-interval="3000">
      <div class="carousel-inner rounded-3">
          <div class="carousel-item active">
            <img src="assets/user1.png" class="d-block w-100" alt="Hospital 1">
          </div> 
          <div class="carousel-item">
            <img src="assets/user2.png" class="d-block w-100" alt="Hospital 2">
          </div>
          <div class="carousel-item">
            <img src="assets/user3.png" class="d-block w-100" alt="Hospital 3">
          </div>
          <div class="carousel-item">
            <img src="assets/user4.png" class="d-block w-100" alt="Hospital 4">
          </div>
        </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#hospitalSlides" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#hospitalSlides" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>

    <!-- Common Diseases Section -->
    <h4 class="section-title mt-4">Common Diseases & Remedies</h4>
    <div id="diseaseSlides" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <!-- Add your disease cards here -->
        <!-- Example: Common Cold -->
        <div class="carousel-item active">
          <div class="card-slide">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Common Cold</h5>
                <h6 class="card-subtitle mb-2 text-muted">Symptoms</h6>
                <p class="card-text">Runny nose, sneezing, sore throat, cough, and general fatigue.</p>
                <h6 class="card-subtitle mb-2 text-muted">Remedies</h6>
                <p class="card-text">Rest, stay hydrated, use a humidifier, and drink warm fluids.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="carousel-item">
  <div class="card-slide">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Fever</h5>
        <h6 class="card-subtitle mb-2 text-muted">Symptoms</h6>
        <p class="card-text">Elevated body temperature, chills, sweating, headache, and weakness.</p>
        <h6 class="card-subtitle mb-2 text-muted">Remedies</h6>
        <p class="card-text">Stay hydrated, rest, use fever-reducing medications like paracetamol.</p>
      </div>
    </div>
  </div>
</div>


<div class="carousel-item">
  <div class="card-slide">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Diarrhea</h5>
        <h6 class="card-subtitle mb-2 text-muted">Symptoms</h6>
        <p class="card-text">Frequent loose stools, abdominal cramps, nausea, and dehydration.</p>
        <h6 class="card-subtitle mb-2 text-muted">Remedies</h6>
        <p class="card-text">Oral rehydration solution (ORS), bland diet, avoid dairy and fatty foods.</p>
      </div>
    </div>
  </div>
</div>


<div class="carousel-item">
  <div class="card-slide">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Ear Infection</h5>
        <h6 class="card-subtitle mb-2 text-muted">Symptoms</h6>
        <p class="card-text">Ear pain, trouble hearing, fever, fluid drainage from ear.</p>
        <h6 class="card-subtitle mb-2 text-muted">Remedies</h6>
        <p class="card-text">Warm compress, pain relievers, consult pediatrician for antibiotics.</p>
      </div>
    </div>
  </div>
</div>


<div class="carousel-item">
  <div class="card-slide">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Skin Rash</h5>
        <h6 class="card-subtitle mb-2 text-muted">Symptoms</h6>
        <p class="card-text">Redness, itching, bumps or patches on skin.</p>
        <h6 class="card-subtitle mb-2 text-muted">Remedies</h6>
        <p class="card-text">Apply soothing lotion, avoid irritants, consult doctor if persistent.</p>
      </div>
    </div>
  </div>
</div>


<div class="carousel-item">
  <div class="card-slide">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Constipation</h5>
        <h6 class="card-subtitle mb-2 text-muted">Symptoms</h6>
        <p class="card-text">Infrequent bowel movements, hard stools, abdominal discomfort.</p>
        <h6 class="card-subtitle mb-2 text-muted">Remedies</h6>
        <p class="card-text">Increase fiber intake, drink water, gentle exercise, pediatric laxatives if advised.</p>
      </div>
    </div>
  </div>
</div>

        <!-- Add more carousel items for other diseases -->
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#diseaseSlides" data-bs-slide="prev">
        <span class="carousel-control-prev-icon bg-dark rounded-circle" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#diseaseSlides" data-bs-slide="next">
        <span class="carousel-control-next-icon bg-dark rounded-circle" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>

    <hr class="my-5">

    <!-- Body Map Section -->
    <h4 class="section-title">Find the Right Doctor</h4>
    <div class="body-map-section">
      <p>Identify the body part and find the specialist you need to see.</p>
      <div class="body-map-container">
        

        
<a [routerLink]="['/baby-body-map']" class="body-image-link">
  <img src="assets/baby-bodyparts.png">
</a>

<a [routerLink]="['/female-body-map']" class="body-image-link">
  <img src="assets/female-bodyparts.png">
</a>

<a [routerLink]="['/male-body-map']" class="body-image-link">
  <img src="assets/male-bodyparts.png">
</a>
      </div>
    </div>
  </div>
</div>


<!-- Profile -->
<div *ngSwitchCase="'profile'" class="profile-section">
  <h2>Doctor Profile</h2>

  <!-- Initial View -->
  <div *ngIf="!isEditing && !showDetails" class="item-card">
    <p><strong>Name:</strong> {{ doctorName }}</p>
    <p><strong>Email:</strong> {{ profileForm.get('email')?.value }}</p>
    <div class="button-group">
      <button (click)="showDetails = true" style="background-color:#1976d2;color:white;padding:10px 16px;border-radius:4px;">View Profile</button>
      <button (click)="enableEdit()" style="background-color:#e0e0e0;color:#333;padding:10px 16px;border-radius:4px;">Edit Profile</button>
    </div>
  </div>

  

<div *ngIf="showDetails && profileForm" class="item-card">
  <div class="card-content">
    <p><strong>Name:</strong> {{ doctorName }}</p>
    <p><strong>Email:</strong> {{ profileForm.get('email')?.value }}</p>
    <p><strong>Phone:</strong> {{ profileForm.get('phoneNumber')?.value }}</p>
    <p><strong>Gender:</strong> {{ profileForm.get('gender')?.value }}</p>
    <p><strong>DOB:</strong> {{ profileForm.get('dob')?.value }}</p>
    <p><strong>Specialization:</strong> {{ profileForm.get('specilization')?.value }}</p>
    <p><strong>Qualification:</strong> {{ profileForm.get('qualifications')?.value }}</p>
    <p><strong>Experience:</strong> {{ profileForm.get('expirence')?.value }} years</p>
    <div class="button-group">
      <button (click)="showDetails = false" style="background-color:#1976d2;color:white;padding:10px 16px;border-radius:4px;">Close</button>
      <button (click)="downloadProfilePdf()" style="background-color:#4caf50;color:white;padding:10px 16px;border-radius:4px;">Download PDF</button>
    </div>
  </div>

  
<div *ngFor="let slot of availabilityList; let i = index" class="item-card" (click)="toggleExpand(i)" style="cursor:pointer;">
  <strong>{{ slot.availableDate }}</strong>
  <div *ngIf="expandedIndex === i" class="slots-container">
    <p><strong>Start:</strong> {{ slot.startTime }}</p>
    <p><strong>End:</strong> {{ slot.endTime }}</p>
    <p><strong>Status:</strong> {{ slot.isAvailable ? 'Available' : 'Not Available' }}</p>
  </div>
</div>
</div>

  <!-- Edit Mode -->
  <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
  <form *ngIf="isEditing" [formGroup]="profileForm" (ngSubmit)="saveProfile()">
    <p><strong>Name:</strong> {{ doctorName }}</p>
    <p><strong>Email:</strong> {{ profileForm.get('email')?.value }}</p>
    <div class="item-card">
      <label>Phone Number:</label>
      <input formControlName="phoneNumber" type="text" maxlength="10" pattern="[0-9]{10}" />
      <label>Gender:</label>
      <select formControlName="gender">
        <option value="">Select Gender</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Other">Other</option>
      </select>
      <label>DOB:</label>
      <input formControlName="dob" type="date" />
      <label>Specialization:</label>
      <select formControlName="specilization">
       <option *ngFor="let spec of specilization" [value]="spec">{{ spec }}</option>
      </select>
      <label>Qualification:</label>
      <input formControlName="qualifications" type="text" maxlength="100" />
      <label>Experience (Years):</label>
      <input formControlName="expirence" type="number" min="0" />
      <div class="button-group">
      <button type="submit" class="primary-btn">Save</button>
      <button type="button" style="background-color:#f44336;color:white;padding:10px 16px;border-radius:4px;" (click)="cancelEdit()">Cancel</button>
      <button type="button" class="secondary-btn" (click)="cancelEdit()">Back</button>
    </div>
    </div>
    
  </form>
</div>


<!-- Appointment Section -->
<div *ngSwitchCase="'appointment'" class="dashboard-container">
  <h2>Appointments</h2>

  <div class="filter-container">
    <input type="date" [(ngModel)]="filterFromDate" />
    <input type="date" [(ngModel)]="filterToDate" />
    <button (click)="loadAppointments()">Filter</button>
  </div>

  
  <ng-container *ngIf="appointments as appts">
    <div *ngIf="appointments && appointments.length > 0; else noAppointments">
      <table>
        <thead>
          <tr>
            <th>Patient ID</th>
            <th>Start Time</th>
            <th>End Time</th>
            <th>Status</th>
            <th>Actions</th>
            
</tr>
        </thead>
        <tbody>
          <tr *ngFor="let appt of appointments">
            <td>{{ appt.patientId }}</td>
            <td>{{ appt.startUtc | date: 'short' }}</td>
            <td>{{ appt.endUtc | date: 'short' }}</td>
            <td>{{ appt.status }}</td>
            <td>
              <button class="secondary-btn" (click)="rescheduleAppointment(appt)">Reschedule</button>
              <button class="primary-btn" (click)="cancelAppointment(appt.appointmentId)">Cancel</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>
  
 <ng-template #noAppointments>
    <p>No appointments found.</p>
  </ng-template>
</div>




<!-- Calendar -->
<div *ngSwitchCase="'calender'">
  <div class="dashboard-container">
    <h2>Set Availability</h2>

    <!-- Availability Form -->
    <div class="item-card">
      <form [formGroup]="availabilityForm" (ngSubmit)="submitAvailability()">
        <label>Date:</label>
        
<input
  type="date"
  formControlName="availableDate"
  [min]="minDate"
  [max]="maxDate"
  required
/>
<div *ngIf="availabilityForm.get('availableDate')?.errors?.['dateOutOfRange']" class="error-message">
  Date must be today or within the next 2 days.
</div>


        <label>Start Time:</label>
        <input type="time" formControlName="startTime" required>

        <label>End Time:</label>
        <input type="time" formControlName="endTime" required>

        <div class="button-group">
          <button type="submit" class="primary-btn">Set Availability</button>
        </div>
      </form>
      <p *ngIf="successMessage" class="success-message">{{ successMessage }}</p>
    </div>

    

<!-- Search and Sort Section -->
<div class="item-card" style="margin-bottom: 20px;">
  <h3>Search & Sort Availability</h3>
  <div class="filter-container">
    <!-- Search by Date -->
    
<input type="date" [(ngModel)]="searchQuery" />
    <button class="primary-btn" (click)="searchAvailability()">Search</button>


    <!-- Sort Options -->
    <select [(ngModel)]="sortOrder" (change)="sortAvailability()">
      <option value="asc">Sort: Date ↑</option>
      <option value="desc">Sort: Date ↓</option>
    </select>
  </div>
</div>


    <!-- Grouped Availability -->
    <div *ngFor="let group of groupedAvailability" class="item-card">
      <strong>{{ group.date | date:'dd-MM-yyyy' }}</strong>
      <div class="slots-container">
        <div *ngFor="let slot of group.slots" class="slot-card">
          {{ slot.startTime }} - {{ slot.endTime }}
          <div class="button-group" style="margin-top:10px;">
            <button class="secondary-btn" (click)="editSlot(slot)">Edit</button>
            <button class="primary-btn" style="background-color:#d9534f;" (click)="deleteSlot(slot.scheduleId)">Delete</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
         
    </ng-container>
  </div>
</div>
